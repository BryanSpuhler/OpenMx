
NPSOL_DIR=@npsol_dir@

# Currently this sets -Wall if compiler is gcc
COMPILER_SPECIFIC_FLAGS=@compiler_specific_flags@
ARCH_SPECIFIC_LINKER_FLAGS=@arch_specific_linker_flags@
ARCH_SPECIFIC_COMPILER_FLAGS=@arch_specific_compiler_flags@
OPENMP_CXXFLAGS=@OPENMP_CXXFLAGS@

# Uncomment one of the following lines to turn on all debugging output in the backend
# DEBUG_CXXFLAGS=-DDEBUGMX                     # DEBUGMX gives Setup, cleanup, and per-iteration details
# DEBUG_CXXFLAGS=-DDEBUGMX -DDEBUGMX_ALGEBRA   # DEBUGMX_ALGEBRA gives per-compute calculation output (be careful with FIML)
# DEBUG_CXXFLAGS=-DDEBUGMX -DDEBUGMX_ALGEBRA -DDEBUGMX_MATRIX # turn on algebra and matrix debugging
# DEBUG_CXXFLAGS=-DDEBUGMX_ROWS                # DEBUGMX_ROWS gives per-row output for selected FIML rows
# DEBUG_CXXFLAGS=-DVERBOSEMX                   # VERBOSEMX gives minimal per-iteration details and a few other notes
# DEBUG_CXXFLAGS=-DDEBUGMX_DEVELOPER             # DEBUGMX_DEVELOPER does additional conformance checking for matrix operations
# DEBUG_CXXFLAGS=-D_GLIBCXX_DEBUG -g3 -fno-inline -O0  --coverage   # if you are using gcc

# To collect gcov statistics (gcc only)
# DEBUG_CXXFLAGS=--coverage
# DEBUG_LDFLAGS=--coverage

PKG_CXXFLAGS=$(COMPILER_SPECIFIC_FLAGS) $(OPENMP_CXXFLAGS) $(ARCH_SPECIFIC_COMPILER_FLAGS) $(DEBUG_CXXFLAGS)
PKG_LIBS=$(FLIBS) $(BLAS_LIBS) $(LAPACK_LIBS) $(OPENMP_CXXFLAGS) -lnpsol -L$(NPSOL_DIR) $(ARCH_SPECIFIC_LINKER_FLAGS) $(DEBUG_LDFLAGS)

save-gcno: $(SHLIB)
	mkdir -p ../inst/debug
	-cp *.gcno ../inst/debug/
